(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1744:function(e,t,a){"use strict";var n=a(71),r=a.n(n),c=a(198),l=a(7),i=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),l=Object(c.a)(r,1)[0];return n.splice(a,0,l),n},s=i,o=function(e,t,a){var n=l.a.find(e,{id:t.droppableId}),r=l.a.find(e,{id:a.droppableId}),c=n.idCards[t.index];if(t.droppableId===a.droppableId){var s=i(n.idCards,t.index,a.index);return e.map(function(e){return e.id===t.droppableId&&(e.idCards=s),e})}return n.idCards.splice(t.index,1),r.idCards.splice(a.index,0,c),e.map(function(e){return e.id===t.droppableId?n:e.id===a.droppableId?r:e})},m=a(50),u=a(10),d=a(3),h=function e(t){Object(u.a)(this,e);var a=t||{};this.id=a.id||d.B.generateGUID(),this.name=a.name||"",this.idCards=[]},p=function e(t){Object(u.a)(this,e);var a=t||{};this.id=a.id||d.B.generateGUID(),this.name=a.name||"",this.description=a.description||"",this.idAttachmentCover=a.idAttachmentCover||"",this.idMembers=a.idMembers||[],this.idLabels=a.idLabels||[],this.attachments=a.attachments||[],this.subscribed=a.subscribed||!0,this.checklists=a.checklists||[],this.checkItems=a.checkItems||0,this.checkItemsChecked=a.checkItemsChecked||0,this.comments=a.comments||[],this.activities=a.activities||[],this.due=a.due||""},b=a(240),f="[SCRUMBOARD APP] GET BOARD",E="[SCRUMBOARD APP] DELETE BOARD",v="[SCRUMBOARD APP] COPY BOARD",C="[SCRUMBOARD APP] RENAME BOARD",g="[SCRUMBOARD APP] CHANGE BOARD SETTINGS",O="[SCRUMBOARD APP] RESET BOARD",y="[SCRUMBOARD APP] ORDER LIST",k="[SCRUMBOARD APP] ORDER CARD",A="[SCRUMBOARD APP] ADD CARD",x="[SCRUMBOARD APP] ADD LIST",j="[SCRUMBOARD APP] ADD LABEL",N="[SCRUMBOARD APP] RENAME LIST",I="[SCRUMBOARD APP] REMOVE LIST";function w(e){var t=r.a.get("/api/scrumboard-app/board",{boardId:e});return function(e){return t.then(function(t){return e({type:f,payload:t.data})},function(t){e(Object(m.A)({message:t.response.data,autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"right"}})),b.a.push({pathname:"/apps/scrumboard/boards"})})}}function S(){return{type:O}}function R(e){return function(t,a){var n=a().scrumboardApp.board,c=n.lists,l=s(c,e.source.index,e.destination.index);return r.a.post("/api/scrumboard-app/list/order",{boardId:n.id,lists:l}).then(function(e){t(Object(m.A)({message:"List Order Saved",autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"right"}}))}),t({type:y,payload:l})}}function D(e){return function(t,a){var n=a().scrumboardApp.board,c=n.lists,l=o(c,e.source,e.destination);return r.a.post("/api/scrumboard-app/card/order",{boardId:n.id,lists:l}).then(function(e){t(Object(m.A)({message:"Card Order Saved",autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"right"}}))}),t({type:k,payload:l})}}function T(e,t,a){var n=new p({name:a}),c=r.a.post("/api/scrumboard-app/card/new",{boardId:e,listId:t,data:n});return function(e){return new Promise(function(t,a){c.then(function(a){return t(a.data),e({type:A,payload:a.data})})})}}function M(e,t){var a=new h({name:t}),n=r.a.post("/api/scrumboard-app/list/new",{boardId:e,data:a});return function(e){return n.then(function(t){return e({type:x,payload:t.data})})}}function P(e,t,a){var n=r.a.post("/api/scrumboard-app/list/rename",{boardId:e,listId:t,listTitle:a});return function(e){return n.then(function(n){return e({type:N,listId:t,listTitle:a})})}}function B(e,t){var a=r.a.post("/api/scrumboard-app/list/remove",{boardId:e,listId:t});return function(e){return a.then(function(a){return e({type:I,listId:t})})}}function L(e){return function(t){return t({type:j,payload:e})}}function H(e){return function(t,a){var n=a().scrumboardApp.board,c=l.a.merge(n.settings,e);return r.a.post("/api/scrumboard-app/board/settings/update",{boardId:n.id,settings:c}).then(function(e){return t({type:g,payload:e.data})})}}function U(e){var t=r.a.post("/api/scrumboard-app/board/delete",{boardId:e});return function(e){return t.then(function(t){return b.a.push({pathname:"/apps/scrumboard/boards"}),e({type:E})})}}function F(e){var t=l.a.merge(e,{id:d.B.generateGUID(),name:e.name+" (Copied)",uri:e.uri+"-copied"});return function(e){return e(X(t)),{type:v}}}function _(e,t){var a=r.a.post("/api/scrumboard-app/board/rename",{boardId:e,boardTitle:t});return function(e){return a.then(function(a){return e({type:C,boardTitle:t})})}}var G=[{id:"26022e4129ad3a5sc28b36cd",name:"High Priority",class:"bg-red text-white"},{id:"56027e4119ad3a5dc28b36cd",name:"Design",class:"bg-orange text-white"},{id:"5640635e19ad3a5dc21416b2",name:"App",class:"bg-blue text-white"},{id:"6540635g19ad3s5dc31412b2",name:"Feature",class:"bg-green text-white"}],z=[{id:"56027c1930450d8bf7b10758",name:"Alice Freeman",avatar:"assets/images/avatars/alice.jpg"},{id:"26027s1930450d8bf7b10828",name:"Danielle Obrien",avatar:"assets/images/avatars/danielle.jpg"},{id:"76027g1930450d8bf7b10958",name:"James Lewis",avatar:"assets/images/avatars/james.jpg"},{id:"36027j1930450d8bf7b10158",name:"John Doe",avatar:"assets/images/avatars/Velazquez.jpg"}],W=function e(t){Object(u.a)(this,e);var a=t||{};this.name=a.name||"Untitled Board",this.uri=a.uri||"untitled-board",this.id=a.id||d.B.generateGUID(),this.settings=a.settings||{color:"",subscribed:!0,cardCoverImages:!0},this.lists=[],this.cards=[],this.members=a.members||z,this.labels=a.labels||G},K="[SCRUMBOARD APP] GET BOARDS",q="[SCRUMBOARD APP] RESET BOARDS",V="[SCRUMBOARD APP] NEW BOARD";function J(){var e=r.a.get("/api/scrumboard-app/boards");return function(t){return e.then(function(e){return t({type:K,payload:e.data})})}}function Y(){return{type:q}}function X(e){var t=r.a.post("/api/scrumboard-app/board/new",{board:e||new W});return function(e){return t.then(function(t){var a=t.data;return b.a.push({pathname:"/apps/scrumboard/boards/"+a.id+"/"+a.handle}),e({type:V,board:a})})}}var Q="[SCRUMBOARD APP] OPEN CARD DIALOG",Z="[SCRUMBOARD APP] CLOSE CARD DIALOG",$="[SCRUMBOARD APP] UPDATE CARD",ee="[SCRUMBOARD APP] CHANGE CARD",te="[SCRUMBOARD APP] REMOVE CARD",ae="[SCRUMBOARD APP] CHIP CHANGED CARD",ne="[SCRUMBOARD APP] NEW CHIP CARD",re="[SCRUMBOARD APP] MAKE COVER CARD",ce="[SCRUMBOARD APP] REMOVE COVER CARD",le="[SCRUMBOARD APP] REMOVE ATTACHMENT CARD",ie="[SCRUMBOARD APP] REMOVE DUE CARD",se="[SCRUMBOARD APP] TOGGLE LABEL CARD",oe="[SCRUMBOARD APP] TOGGLE MEMBER CARD",me="[SCRUMBOARD APP] ADD CHECKLIST CARD",ue="[SCRUMBOARD APP] CHECKLIST CHANGE CARD",de="[SCRUMBOARD APP] CHECKLIST REMOVE CARD",he="[SCRUMBOARD APP] COMMENT ADD CARD";function pe(e){return{type:Q,payload:e}}function be(){return{type:Z}}function fe(e,t){return function(a){return r.a.post("/api/scrumboard-app/card/update",{boardId:e,card:t}).then(function(e){return a(Object(m.A)({message:"Card Saved",autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"right"}})),a({type:$,payload:t})})}}function Ee(e,t){return function(a){return r.a.post("/api/scrumboard-app/card/remove",{boardId:e,cardId:t}).then(function(n){return a({type:te,boardId:e,cardId:t})})}}function ve(e){return{type:ee,target:e.target}}function Ce(e,t){return{type:ae,name:e,value:t}}function ge(e,t){return{type:ne,name:e,value:t}}function Oe(e){return{type:re,attachmentId:e}}function ye(){return{type:ce}}function ke(e){return{type:le,attachmentId:e}}function Ae(){return{type:ie}}function xe(e){return{type:se,labelId:e}}function je(e){return{type:oe,memberId:e}}function Ne(e){return{type:me,newList:e}}function Ie(e){return{type:ue,item:e}}function we(e){return{type:de,id:e}}function Se(e){return{type:he,comment:e}}a.d(t,"m",function(){return f}),a.d(t,"l",function(){return E}),a.d(t,"z",function(){return C}),a.d(t,"e",function(){return g}),a.d(t,"B",function(){return O}),a.d(t,"t",function(){return y}),a.d(t,"s",function(){return k}),a.d(t,"a",function(){return A}),a.d(t,"d",function(){return x}),a.d(t,"c",function(){return j}),a.d(t,"A",function(){return N}),a.d(t,"y",function(){return I}),a.d(t,"Q",function(){return w}),a.d(t,"ib",function(){return S}),a.d(t,"hb",function(){return R}),a.d(t,"gb",function(){return D}),a.d(t,"V",function(){return T}),a.d(t,"W",function(){return M}),a.d(t,"fb",function(){return P}),a.d(t,"db",function(){return B}),a.d(t,"H",function(){return L}),a.d(t,"J",function(){return H}),a.d(t,"P",function(){return U}),a.d(t,"O",function(){return F}),a.d(t,"eb",function(){return _}),a.d(t,"n",function(){return K}),a.d(t,"C",function(){return q}),a.d(t,"p",function(){return V}),a.d(t,"R",function(){return J}),a.d(t,"jb",function(){return Y}),a.d(t,"U",function(){return X}),a.d(t,"r",function(){return Q}),a.d(t,"j",function(){return Z}),a.d(t,"F",function(){return $}),a.d(t,"f",function(){return ee}),a.d(t,"v",function(){return te}),a.d(t,"i",function(){return ae}),a.d(t,"q",function(){return ne}),a.d(t,"o",function(){return re}),a.d(t,"w",function(){return ce}),a.d(t,"u",function(){return le}),a.d(t,"x",function(){return ie}),a.d(t,"D",function(){return se}),a.d(t,"E",function(){return oe}),a.d(t,"b",function(){return me}),a.d(t,"g",function(){return ue}),a.d(t,"h",function(){return de}),a.d(t,"k",function(){return he}),a.d(t,"X",function(){return pe}),a.d(t,"M",function(){return be}),a.d(t,"mb",function(){return fe}),a.d(t,"Z",function(){return Ee}),a.d(t,"S",function(){return ve}),a.d(t,"L",function(){return Ce}),a.d(t,"I",function(){return ge}),a.d(t,"T",function(){return Oe}),a.d(t,"bb",function(){return ye}),a.d(t,"Y",function(){return ke}),a.d(t,"cb",function(){return Ae}),a.d(t,"kb",function(){return xe}),a.d(t,"lb",function(){return je}),a.d(t,"G",function(){return Ne}),a.d(t,"K",function(){return Ie}),a.d(t,"ab",function(){return we}),a.d(t,"N",function(){return Se})},1838:function(e,t,a){"use strict";var n=a(19),r=a(18),c=a(1744),l=[],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.n:return Object(r.a)(t.payload);case c.p:return Object(r.a)(e).concat([t.board]);case c.C:return[];default:return e}},s=a(17),o=a(7),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.m:return Object(s.a)({},t.payload);case c.B:return null;case c.t:case c.s:case c.d:return Object(s.a)({},e,{lists:t.payload});case c.a:return Object(s.a)({},t.payload);case c.c:return Object(s.a)({},e,{labels:Object(r.a)(e.labels).concat([t.payload])});case c.F:return Object(s.a)({},e,{cards:e.cards.map(function(e){return e.id===t.payload.id?t.payload:e})});case c.v:return Object(s.a)({},e,{cards:o.a.reject(e.cards,{id:t.cardId}),lists:e.lists.map(function(e){return o.a.set(e,"idCards",o.a.reject(e.idCards,function(e){return e===t.cardId})),e})});case c.A:return Object(s.a)({},e,{lists:e.lists.map(function(e){return e.id===t.listId&&(e.name=t.listTitle),e})});case c.y:return Object(s.a)({},e,{lists:o.a.reject(e.lists,{id:t.listId})});case c.e:return Object(s.a)({},e,{settings:t.payload});case c.l:return null;case c.z:return Object(s.a)({},e,{name:t.boardTitle});default:return e}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.r:return Object(s.a)({},t.payload);case c.v:case c.j:return null;case c.f:return o.a.setIn(e,t.target.name,"checkbox"===t.target.type?t.target.checked:t.target.value);case c.i:return o.a.setIn(e,t.name,t.value.map(function(e){return e.value}));case c.q:return o.a.setIn(e,t.name,Object(r.a)(e[t.name]).concat([t.value]));case c.o:return o.a.setIn(e,"idAttachmentCover",t.attachmentId);case c.w:return o.a.setIn(e,"idAttachmentCover","");case c.u:return Object(s.a)({},e,{attachments:o.a.reject(e.attachments,{id:t.attachmentId}),idAttachmentCover:e.idAttachmentCover===t.attachmentId?"":e.idAttachmentCover});case c.x:return o.a.setIn(e,"due",null);case c.D:return o.a.setIn(e,"idLabels",o.a.xor(e.idLabels,[t.labelId]));case c.E:return o.a.setIn(e,"idMembers",o.a.xor(e.idMembers,[t.memberId]));case c.b:return o.a.setIn(e,"checklists",Object(r.a)(e.checklists).concat([t.newList]));case c.g:var a=e.checklists.findIndex(function(e){return e.id===t.item.id});return o.a.setIn(e,"checklists[".concat(a,"]"),t.item);case c.h:return o.a.setIn(e,"checklists",o.a.reject(e.checklists,{id:t.id}));case c.k:return o.a.setIn(e,"activities",[t.comment].concat(Object(r.a)(e.activities)));default:return e}},d=Object(n.d)({boards:i,board:m,card:u});t.a=d},2654:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(11),c=a(13),l=a(12),i=a(14),s=a(0),o=a.n(s),m=a(1),u=a(32),d=a(272),h=a(19),p=a(1744),b=a(126),f=a(1837),E=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={renameForm:!1,renameTitle:a.props.board.name},a.renameFormToggle=function(e){a.setState({renameForm:e,renameTitle:a.props.board.name})},a.onRenameTitleChange=function(e){a.setState({renameTitle:e.target.value})},a.renameTitleSubmit=function(e){e.preventDefault(),a.canSubmit()?(a.setState({renameForm:!1,renameTitle:a.state.renameTitle}),a.props.renameBoard(a.props.board.id,a.state.renameTitle)):a.renameFormToggle(!1)},a.canSubmit=function(){return""!==a.state.renameTitle},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.board,a=this.state,n=a.renameTitle,r=a.renameForm;return o.a.createElement("div",{className:"flex items-center min-w-0"},r?o.a.createElement(m.j,{onClickAway:function(){return e.renameFormToggle(!1)}},o.a.createElement(m.X,{className:"p-4"},o.a.createElement("form",{className:"flex w-full",onSubmit:this.renameTitleSubmit},o.a.createElement(m.sb,{value:n,onChange:this.onRenameTitleChange,variant:"outlined",margin:"none",autoFocus:!0,InputProps:{endAdornment:o.a.createElement(m.K,{position:"end"},o.a.createElement(m.I,{type:"submit",disabled:!this.canSubmit()},o.a.createElement(m.H,null,"check")))}})))):o.a.createElement("div",{className:"flex items-center justify-center"},t.settings.subscribed&&o.a.createElement(m.H,{className:"text-16 mr-8"},"remove_red_eye"),o.a.createElement(m.vb,{className:"text-16 font-600 cursor-pointer",onClick:function(){return e.renameFormToggle(!0)},color:"inherit"},t.name)))}}]),t}(s.Component);var v=Object(d.g)(Object(b.a)(function(e){return{board:e.scrumboardApp.board}},function(e){return Object(h.c)({renameBoard:p.eb},e)})(E)),C=a(15),g=a(5),O=a.n(g),y=a(80),k=a.n(y),A=a(7),x=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).handleCardClick=function(e,t){e.preventDefault(),a.props.openCardDialog(t)},a.checkItemsChecked=function(e){return A.a.sum(e.checklists.map(function(e){return A.a.sum(e.checkItems.map(function(e){return e.checked?1:0}))}))},a.checkItems=function(e){return A.a.sum(e.checklists.map(function(e){return e.checkItems.length}))},a.commentsCount=function(e){return A.a.sum(e.activities.map(function(e){return"comment"===e.type?1:0}))},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.cardId,r=t.index,c=t.board,l=A.a.find(c.cards,{id:n}),i=this.checkItemsChecked(l),s=this.checkItems(l),u=this.commentsCount(l);return o.a.createElement(f.b,{draggableId:n,index:r,type:"card"},function(t,n){return o.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps),o.a.createElement(m.d,{className:O()(a.card,"w-full mb-16 rounded-4 cursor-pointer"),elevation:n.isDragging?3:0,onClick:function(t){return e.handleCardClick(t,l)}},c.settings.cardCoverImages&&""!==l.idAttachmentCover&&o.a.createElement("img",{className:"block",src:A.a.find(l.attachments,{id:l.idAttachmentCover}).src,alt:"card cover"}),o.a.createElement("div",{className:O()(a.cardContent,"p-16 pb-0")},l.idLabels.length>0&&o.a.createElement("div",{className:"flex flex-wrap mb-8"},l.idLabels.map(function(e){var t=A.a.find(c.labels,{id:e});return o.a.createElement(m.ub,{title:t.name,key:e},o.a.createElement("div",{className:O()(t.class,"w-32  h-6 rounded-6 mr-6 mb-6")}))})),o.a.createElement(m.vb,{className:"font-600 mb-12"},l.name),(l.due||s>0)&&o.a.createElement("div",{className:"flex items-center mb-12"},l.due&&o.a.createElement("div",{className:O()("flex items-center px-8 py-4 mr-8 rounded-sm",k()()>k()(l.due)?"bg-red text-white":"bg-green text-white")},o.a.createElement(m.H,{className:"text-16 mr-4"},"access_time"),o.a.createElement("span",null,k()(l.due).format("MMM Do YY"))),s>0&&o.a.createElement("div",{className:O()("flex items-center px-8 py-4 mr-8 rounded-sm",i===s?"bg-green text-white":"bg-grey-dark text-white")},o.a.createElement(m.H,{className:"text-16 mr-4"},"check_circle"),o.a.createElement("span",null,i),o.a.createElement("span",null,"/"),o.a.createElement("span",null,s))),l.idMembers.length>0&&o.a.createElement("div",{className:"flex flex-wrap mb-12"},l.idMembers.map(function(e){var t=A.a.find(c.members,{id:e});return o.a.createElement(m.ub,{title:t.name,key:e},o.a.createElement(m.b,{className:"mr-8 w-32 h-32",src:t.avatar}))}),o.a.createElement("div",{className:""}))),o.a.createElement("div",{className:O()(a.cardFooter,"px-16 flex justify-between")},o.a.createElement("div",{className:"flex items-center"},l.subscribed&&o.a.createElement(m.H,{className:"text-18 mr-12",color:"action"},"remove_red_eye"),""!==l.description&&o.a.createElement(m.H,{className:"text-18 mr-12",color:"action"},"description")),o.a.createElement("div",{className:"flex items-center justify-end"},l.attachments&&o.a.createElement("span",{className:"flex items-center ml-12"},o.a.createElement(m.H,{className:"text-18 mr-8",color:"action"},"attachment"),o.a.createElement(m.vb,{color:"textSecondary"},l.attachments.length)),u>0&&o.a.createElement("span",{className:"flex items-center ml-12"},o.a.createElement(m.H,{className:"text-18 mr-8",color:"action"},"comment"),o.a.createElement(m.vb,{color:"textSecondary"},u))))))})}}]),t}(s.Component);var j=Object(C.withStyles)(function(e){return{root:{},card:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,borderWidth:1,borderStyle:"solid",borderColor:e.palette.divider},cardContent:{},cardFooter:{height:48,borderTopWidth:1,borderTopStyle:"solid",borderTopColor:e.palette.divider}}},{withTheme:!0})(Object(d.g)(Object(b.a)(function(e){return{board:e.scrumboardApp.board}},function(e){return Object(h.c)({openCardDialog:p.X},e)})(x))),N=a(101),I=a(17),w={formOpen:!1,cardTitle:""},S=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state=w,a.handleOpenForm=function(){a.setState({formOpen:!0})},a.handleCloseForm=function(){a.setState(Object(I.a)({},w))},a.handleChange=function(e){a.setState({cardTitle:e.target.value})},a.onSubmit=function(e){e.preventDefault(),a.props.newCard(a.props.board.id,a.props.listId,a.state.cardTitle).then(function(){a.props.onCardAdded()}),a.handleCloseForm()},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"canBeSubmitted",value:function(){return this.state.cardTitle.length>0}},{key:"render",value:function(){var e=this.props.classes,t=this.state.formOpen;return o.a.createElement("div",{className:O()(e.root,"w-full")},t?o.a.createElement(m.j,{onClickAway:this.handleCloseForm},o.a.createElement("form",{className:"p-16",onSubmit:this.onSubmit},o.a.createElement(m.sb,{className:"mb-16",required:!0,fullWidth:!0,variant:"outlined",label:"Card title",autoFocus:!0,name:"title",value:this.state.cardTitle,onChange:this.handleChange,InputProps:{endAdornment:o.a.createElement(m.K,{position:"end"},o.a.createElement(m.I,{onClick:this.handleCloseForm},o.a.createElement(m.H,{className:"text-18"},"close")))}}),o.a.createElement("div",{className:"flex justify-between items-center"},o.a.createElement(m.c,{variant:"contained",color:"secondary",type:"submit",disabled:!this.canBeSubmitted()},"Add")))):o.a.createElement(m.c,{onClick:this.handleOpenForm,classes:{root:"normal-case font-600 w-full rounded-none h-48",label:"justify-start"}},o.a.createElement(m.H,{className:"text-20 mr-8"},"add"),"Add a card"))}}]),t}(s.Component);var R=Object(C.withStyles)(function(e){return{root:{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:e.palette.divider}}},{withTheme:!0})(Object(d.g)(Object(b.a)(function(e){return{board:e.scrumboardApp.board}},function(e){return Object(h.c)({newCard:p.V},e)})(S))),D=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null,renameForm:!1,renameTitle:a.props.list.name},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.renameFormToggle=function(e){a.setState({renameForm:e,renameTitle:a.props.list.name,anchorEl:null})},a.onRenameTitleChange=function(e){a.setState({renameTitle:e.target.value})},a.renameTitleSubmit=function(e){e.preventDefault(),a.canSubmit()?(a.setState({renameForm:!1,renameTitle:a.state.renameTitle,anchorEl:null}),a.props.renameList(a.props.board.id,a.props.list.id,a.state.renameTitle)):a.renameFormToggle(!1)},a.canSubmit=function(){return""!==a.state.renameTitle},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.board,n=t.list,r=t.handleProps,c=t.removeList,l=this.state,i=l.anchorEl,s=l.renameTitle,u=l.renameForm;return o.a.createElement("div",r,o.a.createElement("div",{className:"flex items-center justify-between h-64 pl-16 pr-8"},o.a.createElement("div",{className:"flex items-center min-w-0"},u?o.a.createElement(m.j,{onClickAway:function(){return e.renameFormToggle(!1)}},o.a.createElement("form",{className:"flex w-full",onSubmit:this.renameTitleSubmit},o.a.createElement(m.sb,{value:s,onChange:this.onRenameTitleChange,variant:"outlined",margin:"none",autoFocus:!0,InputProps:{endAdornment:o.a.createElement(m.K,{position:"end"},o.a.createElement(m.I,{type:"submit",disabled:!this.canSubmit()},o.a.createElement(m.H,null,"check")))}}))):o.a.createElement(m.vb,{className:"text-16 font-600 cursor-pointer",onClick:function(){return e.renameFormToggle(!0)}},n.name)),o.a.createElement("div",{className:""},o.a.createElement(m.I,{"aria-owns":i?"actions-menu":null,"aria-haspopup":"true",onClick:this.handleClick,variant:"outlined",size:"small"},o.a.createElement(m.H,{className:"text-20"},"more_vert")),o.a.createElement(m.T,{id:"actions-menu",anchorEl:i,open:Boolean(i),onClose:this.handleClose},o.a.createElement(m.U,{onClick:function(){c(a.id,n.id)}},o.a.createElement(m.P,null,o.a.createElement(m.H,null,"delete")),o.a.createElement(m.R,{primary:"Remove List"})),o.a.createElement(m.U,{onClick:function(){return e.renameFormToggle(!0)}},o.a.createElement(m.P,null,o.a.createElement(m.H,null,"edit")),o.a.createElement(m.R,{primary:"Rename List"}))))))}}]),t}(s.Component);var T=Object(d.g)(Object(b.a)(function(e){return{board:e.scrumboardApp.board}},function(e){return Object(h.c)({renameList:p.fb,removeList:p.db},e)})(D)),M=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).handleCardAdded=function(){a.contentScrollEl.scrollTop=a.contentScrollEl.scrollHeight},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.list,r=t.index;return o.a.createElement(f.b,{draggableId:n.id,index:r,type:"list"},function(t,r){return o.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps),o.a.createElement(m.d,{className:O()(a.list,"w-256 sm:w-320 mr-16 sm:mr-24 max-h-full flex flex-col"),square:!0,elevation:r.isDragging?3:1},o.a.createElement(T,{list:n,className:O()(a.listHeader),handleProps:t.dragHandleProps}),o.a.createElement(m.f,{ref:function(t){return e.contentScrollEl=t},className:"flex flex-col flex-1 flex-auto h-full min-h-0 w-full p-0 overflow-auto"},o.a.createElement(f.c,{droppableId:n.id,type:"card",direction:"vertical"},function(e){return o.a.createElement("div",{ref:e.innerRef,className:"flex flex-col w-full h-full p-16"},n.idCards.map(function(e,t){return o.a.createElement(j,{key:e,cardId:e,index:t,list:n})}),e.placeholder)})),o.a.createElement(m.e,{className:"p-0 flex-no-shrink"},o.a.createElement(R,{listId:n.id,onCardAdded:e.handleCardAdded}))))})}}]),t}(s.Component),P=Object(C.withStyles)(function(e){return{root:{},list:{backgroundColor:Object(N.darken)(e.palette.background.default,"light"===e.palette.type?.02:.4),transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},listHeader:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.palette.divider}}},{withTheme:!0})(M),B={formOpen:!1,listTitle:""},L=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state=B,a.handleOpenForm=function(){a.setState({formOpen:!0})},a.handleCloseForm=function(){a.setState(Object(I.a)({},B))},a.handleChange=function(e){a.setState({listTitle:e.target.value})},a.onSubmit=function(e){e.preventDefault(),a.props.newList(a.props.board.id,a.state.listTitle),a.handleCloseForm()},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"canBeSubmitted",value:function(){return this.state.listTitle.length>0}},{key:"render",value:function(){var e=this.props.classes,t=this.state.formOpen;return o.a.createElement("div",{className:e.root},o.a.createElement(m.d,{className:O()(e.card,"w-320 mr-24"),square:!0},t?o.a.createElement(m.j,{onClickAway:this.handleCloseForm},o.a.createElement("form",{className:"p-16",onSubmit:this.onSubmit},o.a.createElement(m.sb,{className:"mb-16",required:!0,fullWidth:!0,variant:"outlined",label:"List title",autoFocus:!0,name:"title",value:this.state.listTitle,onChange:this.handleChange,InputProps:{endAdornment:o.a.createElement(m.K,{position:"end"},o.a.createElement(m.I,{onClick:this.handleCloseForm},o.a.createElement(m.H,{className:"text-18"},"close")))}}),o.a.createElement("div",{className:"flex justify-between items-center"},o.a.createElement(m.c,{variant:"contained",color:"secondary",type:"submit",disabled:!this.canBeSubmitted()},"Add")))):o.a.createElement(m.c,{onClick:this.handleOpenForm,classes:{root:"normal-case font-600 w-full rounded-none h-64",label:"justify-start"}},o.a.createElement(m.H,{className:"text-32 text-red mr-8"},"add_circle"),"Add a list")))}}]),t}(s.Component);var H=Object(C.withStyles)(function(e){return{root:{},card:{backgroundColor:Object(N.darken)(e.palette.background.default,"light"===e.palette.type?.02:.4)}}},{withTheme:!0})(Object(d.g)(Object(b.a)(function(e){return{board:e.scrumboardApp.board}},function(e){return Object(h.c)({newList:p.W},e)})(L))),U=a(22),F=a(3),_=function e(t){Object(n.a)(this,e);var a=t||{};this.id=a.id||F.B.generateGUID(),this.name=a.name||"",this.class=a.class||"bg-blue text-white"},G=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,n=t.item,r=t.makeCover,c=t.removeCover,l=t.removeAttachment,i=this.state.anchorEl;switch(n.type){case"image":return o.a.createElement("div",{className:"flex w-full sm:w-1/2 mb-16",key:n.id},o.a.createElement("div",{className:"flex items-center justify-center w-128 h-128 mr-16"},o.a.createElement(m.X,{className:"rounded-4 overflow-hidden",elevation:1},o.a.createElement("img",{className:"block max-h-full max-h-full",src:n.src,alt:"attachment"}))),o.a.createElement("div",{className:"flex flex-auto flex-col justify-center items-start min-w-0"},o.a.createElement("div",{className:"flex items-center w-full"},o.a.createElement(m.vb,{className:"text-16 font-600 truncate flex-shrink"},n.name),a.idAttachmentCover===n.id&&o.a.createElement(m.H,{className:"text-orange-light text-20 ml-4"},"star")),o.a.createElement(m.vb,{className:"truncate w-full mb-12",color:"textSecondary"},n.time),o.a.createElement(m.c,{"aria-owns":i?"actions-menu":null,"aria-haspopup":"true",onClick:this.handleClick,variant:"outlined",size:"small"},"Actions",o.a.createElement(m.H,{className:"text-20"},"arrow_drop_down")),o.a.createElement(m.T,{id:"actions-menu",anchorEl:i,open:Boolean(i),onClose:this.handleClose},a.idAttachmentCover!==n.id?o.a.createElement(m.U,{onClick:function(){e.handleClose(),r(n.id)}},"Make Cover"):o.a.createElement(m.U,{onClick:function(){e.handleClose(),c()}},"Remove Cover"),o.a.createElement(m.U,{onClick:function(){e.handleClose(),l(n.id)}},"Remove Attachment"))));case"link":return o.a.createElement("div",{className:"flex w-full sm:w-1/2 mb-16",key:n.id},o.a.createElement(m.X,{className:"min-w-128 w-128 h-128 mr-16 flex items-center justify-center rounded-4 overflow-hidden",elevation:1},o.a.createElement(m.vb,{className:"font-600"},"LINK")),o.a.createElement("div",{className:"flex flex-auto flex-col justify-center items-start min-w-0"},o.a.createElement(m.vb,{className:"text-16 font-600 truncate w-full"},n.url),o.a.createElement(m.vb,{className:"truncate w-full mb-12",color:"textSecondary"},n.time),o.a.createElement(m.c,{"aria-owns":i?"actions-menu":null,"aria-haspopup":"true",onClick:this.handleClick,variant:"outlined",size:"small"},"Actions",o.a.createElement(m.H,{className:"text-20"},"arrow_drop_down")),o.a.createElement(m.T,{id:"simple-menu",anchorEl:i,open:Boolean(i),onClose:this.handleClose},o.a.createElement(m.U,{onClick:function(){e.handleClose(),l(n.id)}},"Remove Attachment"))));default:return null}}}]),t}(s.Component),z=function(e){var t=e.state,a=e.onClose,n=e.children;return o.a.createElement(m.Y,{hideBackdrop:!0,open:Boolean(t),anchorEl:t,onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},className:"pointer-events-none",classes:{paper:"pointer-events-auto py-8"}},o.a.createElement(m.j,{onClickAway:a},o.a.createElement(o.a.Fragment,null,n)))},W=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null},a.handleMenuClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null})},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.due,n=t.onRemoveDue,r=t.onDueChange,c=a?k()(a).format(k.a.HTML5_FMT.DATE):"";return o.a.createElement("div",null,o.a.createElement(m.I,{color:"inherit",onClick:this.handleMenuClick},o.a.createElement(m.H,null,"today")),o.a.createElement(z,{state:this.state.anchorEl,onClose:this.handleMenuClose},a?o.a.createElement(m.U,{onClick:function(t){n(),e.handleMenuClose(t)}},"Remove Due Date"):o.a.createElement("div",{className:"p-16"},o.a.createElement(m.sb,{label:"Due date",type:"date",name:"card.due",value:c,onChange:function(t){r(t),e.handleMenuClose(t)},placeholder:" Choose a due date",className:"",InputLabelProps:{shrink:!0},variant:"outlined",InputProps:{endAdornment:o.a.createElement(m.K,{position:"end"},o.a.createElement(m.H,{color:"action"},"today"))}}))))}}]),t}(s.Component),K=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null},a.handleMenuClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null})},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.labels,a=e.idLabels,n=e.onToggleLabel;return o.a.createElement("div",null,o.a.createElement(m.I,{color:"inherit",onClick:this.handleMenuClick},o.a.createElement(m.H,null,"label")),o.a.createElement(z,{state:this.state.anchorEl,onClose:this.handleMenuClose},o.a.createElement("div",{className:""},t.map(function(e){return o.a.createElement(m.U,{className:"px-8",key:e.id,onClick:function(t){n(e.id)}},o.a.createElement(m.h,{checked:a.includes(e.id)}),o.a.createElement(m.R,null,e.name),o.a.createElement(m.P,null,o.a.createElement(m.H,null,"label")))}))))}}]),t}(s.Component),q=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null},a.handleMenuClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null})},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.members,a=e.idMembers,n=e.onToggleMember;return o.a.createElement("div",null,o.a.createElement(m.I,{color:"inherit",onClick:this.handleMenuClick},o.a.createElement(m.H,null,"account_circle")),o.a.createElement(z,{state:this.state.anchorEl,onClose:this.handleMenuClose},o.a.createElement("div",{className:""},t.map(function(e){return o.a.createElement(m.U,{className:"px-8",key:e.id,onClick:function(t){n(e.id)}},o.a.createElement(m.h,{checked:a.includes(e.id)}),o.a.createElement(m.b,{className:"w-32 h-32",src:e.avatar}),o.a.createElement(m.R,null,e.name))}))))}}]),t}(s.Component),V=function e(t){Object(n.a)(this,e);var a=t||{};this.id=a.id||F.B.generateGUID(),this.name=a.name||"",this.checkItems=a.checkItems||[]},J=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null,name:"",canSubmit:!1},a.handleMenuClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null,name:""})},a.onSubmit=function(e){e.preventDefault(),console.info(a.canSubmit()),a.canSubmit()&&(a.props.onAddCheckList(new V({name:a.state.name})),a.handleMenuClose())},a.handleTitleChange=function(e){a.setState({name:e.target.value})},a.canSubmit=function(){return""!==a.state.name},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.name;return o.a.createElement("div",null,o.a.createElement(m.I,{color:"inherit",onClick:this.handleMenuClick},o.a.createElement(m.H,null,"check_box")),o.a.createElement(z,{state:this.state.anchorEl,onClose:this.handleMenuClose},o.a.createElement("form",{onSubmit:this.onSubmit,className:"p-16 flex flex-col items-end"},o.a.createElement(m.sb,{label:"Checklist title",name:"name",value:e,onChange:this.handleTitleChange,fullWidth:!0,className:"mb-12",variant:"outlined",required:!0}),o.a.createElement(m.c,{color:"secondary",type:"submit",disabled:!this.canSubmit(),variant:"contained"},"Add"))))}}]),t}(s.Component),Y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null},a.handleMenuClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null})},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.onRemoveCard;return o.a.createElement("div",null,o.a.createElement(m.I,{color:"inherit",onClick:this.handleMenuClick},o.a.createElement(m.H,null,"more_horiz")),o.a.createElement(z,{state:this.state.anchorEl,onClose:this.handleMenuClose},o.a.createElement(m.U,{onClick:e},"Remove Card")))}}]),t}(s.Component),X=a(18),Q=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state=a.props.item,a.handleChange=function(e){a.setState(A.a.setIn(a.state,e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value))},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.state&&t&&!A.a.isEqual(this.state,t)&&(console.info("onListItemChange"),this.props.onListItemChange(this.state))}},{key:"render",value:function(){var e=this.props.onListItemRemove;return this.state?o.a.createElement(m.O,{className:"px-0",key:this.state.id,dense:!0},o.a.createElement(m.h,{checked:this.state.checked,tabIndex:-1,disableRipple:!0,name:"checked",onChange:this.handleChange}),o.a.createElement(m.sb,{className:"flex flex-1 mx-8",name:"name",value:this.state.name,onChange:this.handleChange,variant:"outlined"}),o.a.createElement(m.I,{"aria-label":"Delete",onClick:e},o.a.createElement(m.H,null,"delete"))):null}}]),t}(s.Component),Z=function e(t){Object(n.a)(this,e);var a=t||{};this.id=a.id||F.B.generateGUID(),this.name=a.name||"",this.checked=a.checked||!1},$=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={name:""},a.handleChange=function(e){a.setState(A.a.setIn(a.state,e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value))},a.submit=function(e){e.preventDefault();var t=a.state.name;""!==t&&(a.props.onListItemAdd(new Z({name:t})),a.setState({name:""}))},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.submit},o.a.createElement(m.O,{className:"pr-0 pl-56",dense:!0},o.a.createElement(m.sb,{className:"flex flex-1",name:"name",value:this.state.name,onChange:this.handleChange,variant:"outlined",placeholder:"Add an item"}),o.a.createElement(m.v,{className:"ml-16","aria-label":"Add",size:"small",color:"secondary",type:"submit"},o.a.createElement(m.H,null,"add"))))}}]),t}(s.Component),ee=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={anchorEl:null,renameForm:!1,renameTitle:a.props.checklist.name,checklist:a.props.checklist},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.handleListItemChange=function(e){var t=a.state.checklist.checkItems.findIndex(function(t){return t.id===e.id});a.setState(A.a.setIn(a.state,"checklist.checkItems[".concat(t,"]"),e))},a.handleListItemRemove=function(e){a.setState(A.a.setIn(a.state,"checklist.checkItems",A.a.reject(a.state.checklist.checkItems,{id:e})))},a.checkItemsChecked=function(){return A.a.sum(a.state.checklist.checkItems.map(function(e){return e.checked?1:0}))},a.handleListItemAdd=function(e){a.setState(A.a.setIn(a.state,"checklist.checkItems",Object(X.a)(a.state.checklist.checkItems).concat([e])))},a.renameFormToggle=function(e){a.setState({renameForm:e,renameTitle:a.state.checklist.name})},a.onRenameTitleChange=function(e){a.setState({renameTitle:e.target.value})},a.renameTitleSubmit=function(e){e.preventDefault(),""!==a.state.renameTitle?(a.setState(A.a.setIn(a.state,"checklist.name",a.state.renameTitle)),a.renameFormToggle(!1)):a.renameFormToggle(!1)},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.state.checklist&&t.checklist&&!A.a.isEqual(this.state.checklist,t.checklist)&&(console.info("onCheckListChanged"),this.props.onCheckListChange(this.state.checklist))}},{key:"render",value:function(){var e=this,t=this.props.onRemoveCheckList,a=this.state,n=a.anchorEl,r=a.checklist,c=a.renameTitle,l=a.renameForm;return r?o.a.createElement("div",{className:"mb-24"},o.a.createElement("div",{className:"flex items-center justify-between mt-16 mb-12"},o.a.createElement("div",{className:"flex items-center"},o.a.createElement(m.H,{className:"text-20 mr-8"},"check_box"),l?o.a.createElement(m.j,{onClickAway:function(){return e.renameFormToggle(!1)}},o.a.createElement("form",{onSubmit:this.renameTitleSubmit},o.a.createElement(m.sb,{value:c,onChange:this.onRenameTitleChange,variant:"outlined",margin:"dense",InputProps:{endAdornment:o.a.createElement(m.K,{position:"end"},o.a.createElement(m.I,{type:"submit"},o.a.createElement(m.H,null,"check")))}}))):o.a.createElement(m.vb,{className:"text-16 font-600",onClick:function(){return e.renameFormToggle(!0)}},r.name)),o.a.createElement("div",{className:""},o.a.createElement(m.I,{"aria-owns":n?"actions-menu":null,"aria-haspopup":"true",onClick:this.handleClick,variant:"outlined",size:"small"},o.a.createElement(m.H,{className:"text-20"},"more_vert")),o.a.createElement(m.T,{id:"actions-menu",anchorEl:n,open:Boolean(n),onClose:this.handleClose},o.a.createElement(m.U,{onClick:t},o.a.createElement(m.P,null,o.a.createElement(m.H,null,"delete")),o.a.createElement(m.R,{primary:"Remove Checklist"})),o.a.createElement(m.U,{onClick:function(){return e.renameFormToggle(!0)}},o.a.createElement(m.P,null,o.a.createElement(m.H,null,"edit")),o.a.createElement(m.R,{primary:"Rename Checklist"}))))),o.a.createElement("div",{className:""},o.a.createElement("div",{className:"flex items-center pl-16"},o.a.createElement(m.vb,{className:"flex font-600 mr-12"},this.checkItemsChecked()+" / "+r.checkItems.length),o.a.createElement(m.M,{className:"flex flex-1",variant:"determinate",color:"secondary",value:100*this.checkItemsChecked()/r.checkItems.length})),o.a.createElement(m.N,{className:""},r.checkItems.map(function(t){return o.a.createElement(Q,{item:t,key:t.id,onListItemChange:e.handleListItemChange,onListItemRemove:function(){return e.handleListItemRemove(t.id)}})}),o.a.createElement($,{onListItemAdd:function(t){return e.handleListItemAdd(t)}})))):null}}]),t}(s.Component),te=Object(C.withStyles)(function(e){return{root:{},commentBubble:{borderRadius:"5px 20px 20px 5px",border:"1px solid "+e.palette.divider}}},{withTheme:!0})(function(e){var t=e.item,a=e.members,n=e.classes,r=A.a.find(a,{id:t.idMember});switch(t.type){case"comment":return o.a.createElement(m.O,{dense:!0,className:"px-0"},o.a.createElement(m.b,{alt:r.name,src:r.avatar,className:"w-32 h-32"}),o.a.createElement("div",{className:O()(n.commentBubble,"flex flex-col ml-16 p-12")},o.a.createElement("div",{className:"flex items-center"},o.a.createElement(m.vb,null,r.name),o.a.createElement(m.vb,{className:"ml-8 text-12",color:"textSecondary"},t.time)),o.a.createElement(m.vb,null,t.message)));case"attachment":return o.a.createElement(m.O,{dense:!0,className:"px-0"},o.a.createElement(m.b,{alt:r.name,src:r.avatar,className:"w-32 h-32"}),o.a.createElement("div",{className:"flex items-center ml-16"},o.a.createElement(m.vb,null,r.name,","),o.a.createElement(m.vb,{className:"ml-8"},t.message)),o.a.createElement(m.vb,{className:"ml-8 text-12",color:"textSecondary"},t.time));default:return null}}),ae=function e(t){Object(n.a)(this,e);var a=t||{};this.id=a.id||F.B.generateGUID(),this.type="comment",this.idMember=a.idMember||null,this.message=a.message||"",this.time=a.time||k()().format(k.a.HTML5_FMT.DATE)},ne=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={idMember:"36027j1930450d8bf7b10158",message:""},a.handleChange=function(e){a.setState(A.a.setIn(a.state,e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value))},a.submit=function(e){e.preventDefault(),a.canSubmit()&&(a.props.onCommentAdd(new ae(a.state)),a.setState({message:""}))},a.canSubmit=function(){return""!==a.state.message},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.members,t=A.a.find(e,{id:this.state.idMember});return o.a.createElement("form",{onSubmit:this.submit,className:"flex"},o.a.createElement(m.b,{className:"w-32 h-32",alt:t.name,src:t.avatar}),o.a.createElement("div",{className:"flex flex-col items-start flex-1 pr-0 pl-16"},o.a.createElement(m.sb,{className:"flex flex-1",fullWidth:!0,name:"message",row:3,value:this.state.message,onChange:this.handleChange,variant:"outlined",label:"Add comment",placeholder:"Write a comment..."}),o.a.createElement(m.c,{className:"mt-16","aria-label":"save",variant:"contained",color:"secondary",type:"submit",size:"small",disabled:!this.canSubmit()},"Save")))}}]),t}(s.Component);var re=Object(b.a)(function(e){return{user:e.auth.user}})(ne),ce=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={dueMenu:null},a.updateCard=A.a.debounce(function(e,t){a.props.updateCard(e,t)},600),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){e.card&&this.props.card&&!A.a.isEqual(e.card,this.props.card)&&this.updateCard(this.props.board.id,this.props.card)}},{key:"render",value:function(){var e=this.props,t=e.card,a=e.classes,n=e.removeCard,r=e.closeCardDialog,c=e.board,l=e.addLabel,i=e.handleChange,s=e.chipChange,u=e.removeAttachment,d=e.removeDue,h=e.toggleLabel,p=e.toggleMember,b=e.addCheckList,f=e.checkListChange,E=e.removeCheckList,v=e.commentAdd,C=e.makeCover,g=e.removeCover,y=e.addNewChip,x=t?A.a.find(c.lists,function(e){return e.idCards.includes(t.id)}):null,j=t&&t.due?k()(t.due).format(k.a.HTML5_FMT.DATE):"";return o.a.createElement(m.l,{classes:{root:a.root,paper:O()(a.paper,"max-w-lg w-full m-24")},onClose:r,open:Boolean(t)},t&&o.a.createElement(m.p,{component:"div",className:"p-0"},o.a.createElement(m.a,{position:"static",elevation:1},o.a.createElement(m.tb,{className:"flex w-full overflow-x-auto px-8 sm:px-16"},o.a.createElement("div",{className:"flex flex-1"},o.a.createElement(W,{onDueChange:i,onRemoveDue:d,due:t.due}),o.a.createElement(K,{onToggleLabel:h,labels:c.labels,idLabels:t.idLabels}),o.a.createElement(q,{onToggleMember:p,members:c.members,idMembers:t.idMembers}),o.a.createElement(m.I,{color:"inherit"},o.a.createElement(m.H,null,"attachment")),o.a.createElement(J,{onAddCheckList:b}),o.a.createElement(Y,{onRemoveCard:function(){return n(c.id,t.id)}})),o.a.createElement(m.I,{color:"inherit",onClick:r},o.a.createElement(m.H,null,"close"))))),t&&o.a.createElement(m.n,{className:"p-16 sm:p-24"},o.a.createElement("div",{className:"flex flex-col sm:flex-row sm:justify-between justify-center items-center mb-24"},o.a.createElement("div",{className:"mb-16 sm:mb-0 flex items-center"},o.a.createElement(m.vb,null,c.name),o.a.createElement(m.H,{className:"text-20",color:"inherit"},"chevron_right"),o.a.createElement(m.vb,null,x&&x.name)),t.due&&o.a.createElement(m.sb,{label:"Due date",type:"date",name:"due",value:j,onChange:i,placeholder:" Choose a due date",className:"w-full sm:w-auto",InputLabelProps:{shrink:!0},variant:"outlined",InputProps:{endAdornment:o.a.createElement(m.K,{position:"end"},o.a.createElement(m.H,{color:"action"},"today"))}})),o.a.createElement("div",{className:"flex items-center mb-24"},o.a.createElement(m.sb,{label:"Title",type:"text",name:"name",value:t.name,onChange:i,variant:"outlined",fullWidth:!0,required:!0,InputProps:{endAdornment:o.a.createElement(m.K,{position:"end"},t.subscribed&&o.a.createElement(m.H,{className:"text-20",color:"action"},"remove_red_eye"))}})),o.a.createElement("div",{className:"w-full mb-24"},o.a.createElement(m.sb,{label:"Description",name:"description",multiline:!0,rows:"4",value:t.description,onChange:i,variant:"outlined",fullWidth:!0})),o.a.createElement("div",{className:"flex flex-col sm:flex-row"},t.idLabels.length>0&&o.a.createElement("div",{className:"flex-1 mb-24"},o.a.createElement("div",{className:"flex items-center mt-16 mb-12"},o.a.createElement(m.H,{className:"text-20 mr-8",color:"inherit"},"label"),o.a.createElement(m.vb,{className:"font-600 text-16"},"Labels")),o.a.createElement(F.g,{className:t.idMembers.length>0&&"sm:mr-8",value:t.idLabels.map(function(e){return{value:e,label:A.a.find(c.labels,{id:e}).name,class:A.a.find(c.labels,{id:e}).class}}),onChange:function(e){return s("idLabels",e)},placeholder:"Select multiple Labels",isMulti:!0,textFieldProps:{variant:"outlined"},options:c.labels.map(function(e){return{value:e.id,label:e.name,class:e.class}}),onCreateOption:function(e){var t=new _({name:e});return l(t),y("idLabels",t.id),t.id}})),t.idMembers.length>0&&o.a.createElement("div",{className:"flex-1 mb-24"},o.a.createElement("div",{className:"flex items-center mt-16 mb-12"},o.a.createElement(m.H,{className:"text-20 mr-8",color:"inherit"},"supervisor_account"),o.a.createElement(m.vb,{className:"font-600 text-16"},"Members")),o.a.createElement(F.g,{className:t.idLabels.length>0&&"sm:ml-8",value:t.idMembers.map(function(e){var t=A.a.find(c.members,{id:e});return{value:t.id,label:o.a.createElement(m.ub,{title:t.name},o.a.createElement(m.b,{className:"-ml-12 w-32 h-32",src:t.avatar}))}}),onChange:function(e){return s("idMembers",e)},placeholder:"Select multiple Members",isMulti:!0,textFieldProps:{variant:"outlined"},options:c.members.map(function(e){return{value:e.id,label:o.a.createElement("span",{className:"flex items-center"},o.a.createElement(m.b,{className:"w-32 h-32 mr-8",src:e.avatar}),e.name)}}),variant:"fixed"}))),t.attachments.length>0&&o.a.createElement("div",{className:"mb-24"},o.a.createElement("div",{className:"flex items-center mt-16 mb-12"},o.a.createElement(m.H,{className:"text-20 mr-8",color:"inherit"},"attachment"),o.a.createElement(m.vb,{className:"font-600 text-16"},"Attachments")),o.a.createElement("div",{className:"flex flex-col sm:flex-row flex-wrap"},t.attachments.map(function(e){return o.a.createElement(G,{item:e,card:t,makeCover:C,removeCover:g,removeAttachment:u,key:e.id})}))),t.checklists.map(function(e){return o.a.createElement(ee,{key:e.id,checklist:e,onCheckListChange:f,onRemoveCheckList:function(){return E(e.id)}})}),o.a.createElement("div",{className:"mb-24"},o.a.createElement("div",{className:"flex items-center mt-16 mb-12"},o.a.createElement(m.H,{className:"text-20 mr-8",color:"inherit"},"comment"),o.a.createElement(m.vb,{className:"font-600 text-16"},"Comment")),o.a.createElement("div",null,o.a.createElement(re,{members:c.members,onCommentAdd:v}))),t.activities.length>0&&o.a.createElement("div",{className:"mb-24"},o.a.createElement("div",{className:"flex items-center mt-16"},o.a.createElement(m.H,{className:"text-20 mr-8",color:"inherit"},"list"),o.a.createElement(m.vb,{className:"font-600 text-16"},"Activity")),o.a.createElement(m.N,{className:""},t.activities.map(function(e){return o.a.createElement(te,{item:e,key:e.id,members:c.members})})))))}}]),t}(s.Component);var le=Object(C.withStyles)(function(e){return{root:{},paper:{color:e.palette.text.primary},formControl:{marginBottom:24}}},{withTheme:!0})(Object(U.b)(function(e){var t=e.scrumboardApp;return{card:t.card,board:t.board}},function(e){return Object(h.c)({closeCardDialog:p.M,updateCard:p.mb,removeCard:p.Z,handleChange:p.S,addLabel:p.H,chipChange:p.L,makeCover:p.T,removeCover:p.bb,removeAttachment:p.Y,removeDue:p.cb,toggleLabel:p.kb,toggleMember:p.lb,addCheckList:p.G,checkListChange:p.K,removeCheckList:p.ab,addNewChip:p.I,commentAdd:p.N},e)})(ce)),ie=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.board,a=e.changeBoardSettings,n=e.deleteBoard,r=e.copyBoard;return o.a.createElement("div",null,o.a.createElement(m.a,{position:"static"},o.a.createElement(m.tb,{className:"flex w-full justify-center"},"Settings")),o.a.createElement(m.N,{className:"py-16",dense:!0},o.a.createElement(m.O,{button:!0,onClick:function(){return a({cardCoverImages:!t.settings.cardCoverImages})}},o.a.createElement(m.P,null,o.a.createElement(m.H,null,"photo")),o.a.createElement(m.R,{primary:"Card Cover Images"}),o.a.createElement(m.Q,null,o.a.createElement(m.ib,{onChange:function(){return a({cardCoverImages:!t.settings.cardCoverImages})},checked:t.settings.cardCoverImages}))),o.a.createElement(m.O,{button:!0,onClick:function(){return a({subscribed:!t.settings.subscribed})}},o.a.createElement(m.P,null,o.a.createElement(m.H,null,"remove_red_eye")),o.a.createElement(m.R,{primary:"Subscribe"}),o.a.createElement(m.Q,null,o.a.createElement(m.ib,{onChange:function(){return a({subscribed:!t.settings.subscribed})},checked:t.settings.subscribed}))),o.a.createElement(m.O,{button:!0,onClick:function(){return r(t)}},o.a.createElement(m.P,null,o.a.createElement(m.H,null,"file_copy")),o.a.createElement(m.R,{primary:"Copy Board"})),o.a.createElement(m.O,{button:!0,onClick:function(){return n(t.id)}},o.a.createElement(m.P,null,o.a.createElement(m.H,null,"delete")),o.a.createElement(m.R,{primary:"Delete Board"}))))}}]),t}(s.Component);var se=Object(d.g)(Object(b.a)(function(e){return{board:e.scrumboardApp.board}},function(e){return Object(h.c)({changeBoardSettings:p.J,deleteBoard:p.P,copyBoard:p.O},e)})(ie)),oe=a(235),me=a(1838),ue=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={settingsDrawerOpen:!1},a.onDragEnd=function(e){var t=e.source,n=e.destination;n&&(t.droppableId===n.droppableId&&t.index===n.index||("list"===e.type&&a.props.reorderList(e),"card"===e.type&&a.props.reorderCard(e)))},a.toggleSettingsDrawer=function(e){e=void 0===e?!a.state.settingsDrawerOpen:e,a.setState({settingsDrawerOpen:e})},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.getBoard(this.props.match.params.boardId)}},{key:"componentWillUnmount",value:function(){this.props.resetBoard()}},{key:"render",value:function(){var e=this,t=this.props.board;return t?o.a.createElement("div",{className:"flex flex-1 flex-col w-full h-full relative",ref:function(t){e.root=t}},o.a.createElement(m.a,{position:"static",color:"primary"},o.a.createElement(m.tb,{className:"flex items-center justify-between px-4 sm:px-24 h-64 sm:h-96"},o.a.createElement(m.G,{xsDown:!0},o.a.createElement(m.c,{to:"/apps/scrumboard/boards/",component:u.a,variant:"contained"},o.a.createElement(m.H,{className:"mr-8"},"assessment"),"Boards")),o.a.createElement(m.G,{smUp:!0},o.a.createElement(m.I,{color:"inherit",to:"/apps/scrumboard/boards/",component:u.a},o.a.createElement(m.H,null,"assessment"))),o.a.createElement("div",{className:"flex flex-1 justify-center items-center"},o.a.createElement(v,null)),o.a.createElement(m.I,{color:"inherit",onClick:function(){return e.toggleSettingsDrawer(!0)}},o.a.createElement(m.H,null,"settings")))),o.a.createElement("div",{className:"flex flex-1 p-16 md:p-24 overflow-x-auto overflow-y-hidden"},o.a.createElement(f.a,{onDragEnd:this.onDragEnd},o.a.createElement(f.c,{droppableId:"list",type:"list",direction:"horizontal",ignoreContainerClipping:800},function(e){return o.a.createElement("div",{ref:e.innerRef,className:"flex"},t.lists.map(function(e,t){return o.a.createElement(P,{key:e.id,list:e,index:t})}),e.placeholder,o.a.createElement(H,null))}))),o.a.createElement(m.r,{anchor:"right",className:"absolute overflow-hidden",classes:{paper:"absolute w-320"},BackdropProps:{classes:{root:"absolute"}},container:this.root,ModalProps:{keepMounted:!0},open:this.state.settingsDrawerOpen,onClose:function(){return e.toggleSettingsDrawer(!1)}},o.a.createElement(se,null)),o.a.createElement(le,null)):""}}]),t}(s.Component);t.default=Object(oe.a)("scrumboardApp",me.a)(Object(d.g)(Object(b.a)(function(e){return{board:e.scrumboardApp.board}},function(e){return Object(h.c)({getBoard:p.Q,resetBoard:p.ib,reorderList:p.hb,reorderCard:p.gb},e)})(ue)))}}]);
//# sourceMappingURL=16.fe2f6d21.chunk.js.map